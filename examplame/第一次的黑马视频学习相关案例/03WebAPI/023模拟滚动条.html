<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<style type="text/css">
		*{
			margin: 0;
			padding: 0;
		}
		.box{
			width: 300px;
			height: 500px;
			border:1px solid red;
			margin: 100px;
			position: relative;
			overflow: hidden;

			-webkit-user-select:none;
			-moz-user-select:none;
			-ms-user-select:none;
			user-select: none;

		}
		.content {
            padding: 5px 18px 5px 5px;
            position: absolute;
            top: 0;
            left: 0;

        }
        .scroll {
            width: 18px;
            height: 100%;
            position: absolute;
            top: 0;
            right: 0;
            background-color: #eee;
        }
        .bar {
            height: 100px;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
            background-color: red;
            border-radius:  10px;
            cursor: pointer;
        }

	</style>
</head>
<body>
	<div class="box" id="box">
	    <div class="content" id="content">
	       我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	       我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	        我是文字内容，我是文字内容，我是文字内容，
	    </div>
	    <div class="scroll" id="scroll">
	        <div class="bar" id="bar"></div>
	    </div>
	</div>
<script src="../commonjs/common.js"></script>
	<script type="text/javascript">
		var box=my$('box');
		var content=my$('content');
		var scroll=my$('scroll');
		var bar=my$('bar');
		//根据内容的高度，设置滚动条的高度
		//滚动条的高度/scroll的高度=box的高度/内容的高度

		var barHeight=0;
		if(content.scrollHeight>box.clientHeight){
			barHeight=box.clientHeight/content.scrollHeight*scroll.clientHeight;
		}
		
		bar.style.height=barHeight+'px';
		//1.让滚动条能够拖拽
			//1.1当鼠标按下的时候，求鼠标在滚动条中的位置
			bar.onmousedown=function(e){
				e=e||widow.event;
				var y=getPage(e).pageY-bar.offsetTop-box.offsetTop;
				document.onmousemove=function(e){
					var barY=getPage(e).pageY-y-box.offsetTop;

					//控制bar不能移除scroll
					barY=barY<0 ? 0:barY;
					barY=barY>scroll.clientHeight-bar.clientHeight ? scroll.clientHeight-bar.clientHeight:barY;
					bar.style.top=barY+'px';

					//2.当拖动滚动条的时候，改变内容的位置
					//内容滚动的距离/内容最大能够滚动的最大距离=滚动条滚动的距离/滚动条最大能够滚动的距离

					var contentMax=content.scrollHeight-box.clientHeight;

					var barMax=scroll.clientHeight-bar.clientHeight;

					var contentY=barY/barMax*contentMax;
					content.style.top=-contentY+'px';


				}
			}
			//1.2当鼠标在页面上移动的时候，求滚动条的位置


			document.onmouseup=function(e){
					document.onmousemove=null;
			}
		


	</script>
</body>
</html>